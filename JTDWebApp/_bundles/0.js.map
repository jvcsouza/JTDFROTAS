{"version":3,"sources":["webpack:///./app/modules/travel/travel-detail.component.js","webpack:///./app/modules/travel/travel-detail.html","webpack:///./app/modules/travel/travel-list.component.js","webpack:///./app/modules/travel/travel-list.html","webpack:///./app/modules/travel/travel.module.js","webpack:///./app/modules/travel/travel.services.js","webpack:///./app/modules/travel/travel.states.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA,CAA+B;;AAExB;AACP;AACA;AACA,KAAK;AACL,cAAc,mBAAO,CAAC,qEAAsB;AAC5C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,iBAAiB;AACjB;;AAEA,mCAAmC,gCAAgC;AACnE;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;;AAErB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,yCAAyC,+DAA+D;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,E;;;;;;;;;;;;ACjHA,40EAA40E,0yD;;;;;;;;;;;;ACA50E;AAAA;AAAA;AAAA;AAAA,CAA+B;;AAExB;AACP;AACA;AACA,KAAK;AACL,cAAc,mBAAO,CAAC,iEAAoB;AAC1C;AACA;AACA;AACA;AACA,yEAAyE,QAAQ;AACjF,SAAS;AACT,E;;;;;;;;;;;ACbA,sxCAAsxC,QAAQ,mCAAmC,iBAAiB,+BAA+B,UAAU,+BAA+B,UAAU,+BAA+B,WAAW,0U;;;;;;;;;;;;ACA98C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAmE;AACL;;AAEX;;AAE+B;;AAE3E;;AAEP,wCAAwC,+DAAc;;AAEtD,iDAAiD,8EAAqB;AACtE,+CAA+C,0EAAmB;;AAElE;AACA;AACA,2BAA2B,0DAAW;AACtC,2BAA2B,gEAAiB;AAC5C,2BAA2B,8DAAe;AAC1C,CAAC,G;;;;;;;;;;;;ACnBD;AAAA;AAAA;;AAEO;;AAEP;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEe;AACf,mDAAmD,EAAC;;;;;;;;;;;;;ACfpD;AAAA;AAAA;AAAA;AAAA,CAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kBAAkB;AAClB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,E","file":"0.js","sourcesContent":["﻿import angular from \"angular\";\r\n\r\nexport const travelDetailComponent = {\r\n    bindings: {\r\n        dados: '<'\r\n    },\r\n    template: require('./travel-detail.html'),\r\n    controller: ['$scope', '$stateParams', 'travelServices', '$state',\r\n        ($scope, $stateParams, travelServices, $state) => {\r\n\r\n            var divMap = document.getElementById('map');\r\n            var directionsService = {};\r\n            var directionsRenderer = {};\r\n            $scope.travel = {};\r\n\r\n            var scopeId = $stateParams.id;\r\n            if (scopeId != 0)\r\n                travelServices.getTravel(scopedId)\r\n                    .success(rs => $scope.travel = rs);\r\n\r\n            $scope.initMap = () => {\r\n                directionsService = new window.google.maps.DirectionsService();\r\n                directionsRenderer = new window.google.maps.DirectionsRenderer();\r\n                var map = new window.google.maps.Map(divMap, {\r\n                    zoom: 7,\r\n                    center: { lat: 41.85, lng: -87.65 }\r\n                });\r\n                directionsRenderer.setMap(map);\r\n\r\n                $('#map').animate({ width: '100%', height: '100%' });\r\n            }\r\n\r\n            $scope.updateMaps = (origin, destiny) => {\r\n\r\n                var request = {\r\n                    origin: new window.google.maps.LatLng(origin.lat, origin.lng),\r\n                    destination: new window.google.maps.LatLng(destiny.lat, destiny.lng),\r\n                    travelMode: 'DRIVING'\r\n                }\r\n\r\n                directionsService.route(request, (response, status) => {\r\n                    if (status === 'OK')\r\n                        directionsRenderer.setDirections(response);\r\n                });\r\n            }\r\n\r\n            $scope.cancel = () => $state.go('travels.list');\r\n\r\n            var searchCNPJ = (cnpj) =>\r\n                companyServices.searchCnpj(cnpj)\r\n                    .then(rs => {\r\n                        if (!rs)\r\n                            throw rs;\r\n                        return rs;\r\n                    });\r\n\r\n            var saveCompany = company =>\r\n                companyServices.saveCompany(company)\r\n                    .then(rs => {\r\n                        Toast.fire({\r\n                            icon: \"success\",\r\n                            title: \"Operacao Concluida!\",\r\n                        });\r\n                        getCompanies();\r\n                        return rs;\r\n                    });\r\n\r\n            var CNPJIsValid = (value) => {\r\n                var cnpj = value.replace(/[\\.\\-//]?/g, '');\r\n\r\n                if (/[\\D]/g.test(cnpj))\r\n                    return 'O CNPJ deve conter apenas numeros.';\r\n\r\n                if (cnpj.length !== 14)\r\n                    return 'O valor informado nao e um CNPJ valido.';\r\n            };\r\n\r\n            $scope.openModalCnpj = () => {\r\n                Swal.fire({\r\n                    title: 'Informe o CNPJ da empresa abaixo: ',\r\n                    input: 'text',\r\n                    inputAttributes: {\r\n                        autocapitalize: 'off',\r\n                        'ui-br-cnpj-mask': 'ui-br-cnpj-mask',\r\n                        'max-length': 18\r\n                    },\r\n                    customClass: {\r\n                        input: 'ml-5 mr-5 w-75'\r\n                    },\r\n                    showCancelButton: true,\r\n                    confirmButtonText: 'Buscar',\r\n                    showLoaderOnConfirm: true,\r\n                    inputValidator: CNPJIsValid,\r\n                    preConfirm: searchCNPJ,\r\n                    allowOutsideClick: () => !Swal.isLoading()\r\n                })\r\n                    .then((result) => {\r\n                        if (result.value.status === 200) {\r\n                            Swal.fire({\r\n                                title: `CNPJ Encontrado!`,\r\n                                text: `${result.value.data.FantasyName || result.value.data.Person.Name}`,\r\n                                icon: 'info',\r\n                                showCancelButton: true,\r\n                                confirmButtonColor: '#3085d6',\r\n                                cancelButtonColor: '#d33',\r\n                                cancelButtonText: 'Esta errado, quero cancelar.',\r\n                                confirmButtonText: 'Esta correto, pode salvar.',\r\n                                preConfirm: () => saveCompany(result.value.data),\r\n                            });\r\n                        }\r\n                    })\r\n            }\r\n        }],\r\n};","module.exports = \"<div class=\\\"card row shadow-sm px-2\\\">\\r\\n    <form class=\\\"col pl-0\\\">\\r\\n        <div class=\\\"card-body pt-2\\\">\\r\\n            <div class=\\\"card-title m-3\\\">\\r\\n                <h4 class=\\\"h4 font-weight-light\\\">Registro Viagem</h4>\\r\\n            </div>\\r\\n            <div class=\\\"row container\\\">\\r\\n                <div class=\\\"col-sm-6 py-4\\\">\\r\\n                    <div class=\\\"form-group col\\\">\\r\\n                        <label for=\\\"client\\\">Cliente:</label>\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client\\\" placeholder=\\\"Insira o nome de um cliente\\\">\\r\\n                        <small id=\\\"client\\\" class=\\\"form-text text-muted\\\">\\r\\n                            <a href=\\\"javascript:\\\" ng-click=\\\"openModalCnpj()\\\">Clique aqui para cadastrar com CNPJ</a>\\r\\n                        </small>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group col\\\">\\r\\n                        <label for=\\\"origin\\\">Origem:</label>\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"origin\\\" placeholder=\\\"Origem\\\">\\r\\n                        <small id=\\\"origin\\\" class=\\\"form-text text-muted\\\"><a href=\\\"#cep\\\">Buscar por CEP</a></small>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group col\\\">\\r\\n                        <label for=\\\"destiny\\\">Destino:</label>\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"destiny\\\" placeholder=\\\"Destino\\\">\\r\\n                        <small id=\\\"destiny\\\" class=\\\"form-text text-muted\\\"><a href=\\\"#cep\\\">Buscar por CEP</a></small>\\r\\n                    </div>\\r\\n                    <div class=\\\"row float-right mr-1\\\">\\r\\n                        <a href=\\\"javascript:\\\" ng-click=\\\"initMap()\\\" class=\\\"btn btn-primary\\\">Salvar</a>\\r\\n                        <button ng-click=\\\"initMap()\\\" class=\\\"btn btn-outline-secondary ml-1\\\">InitMaps</button>\\r\\n                        <button ng-click=\\\"cancel()\\\" class=\\\"btn btn-outline-secondary ml-1\\\">Cancelar</button>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"col-sm-6\\\">\\r\\n                    <div class=\\\"card col col-sm-12 h-100 shadow-sm\\\">\\r\\n                        <div class=\\\"row h-100\\\">\\r\\n                            <div id=\\\"map\\\" class=\\\"col-sm-12\\\" style=\\\"overflow: hidden;\\\"></div>\\r\\n                        </div>\\r\\n                        <div class=\\\"card-body py-2 px-0\\\">\\r\\n                            <label for=\\\"\\\">Cliente: </label>\\r\\n                            <strong>Serviço de Correios e Cia</strong>\\r\\n                            <div class=\\\"w-100\\\"></div>\\r\\n                            <div class=\\\"row\\\">\\r\\n                                <div class=\\\"col\\\">\\r\\n                                    <label for=\\\"\\\">De: </label>\\r\\n                                    <strong>Orindiúva</strong>\\r\\n                                </div>\\r\\n                                <div class=\\\"col\\\">\\r\\n                                    <label for=\\\"\\\">Para: </label>\\r\\n                                    <strong>São josé do rio preto</strong>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"row\\\">\\r\\n                                <div class=\\\"col\\\">\\r\\n                                    <label for=\\\"\\\">Km total: </label>\\r\\n                                    <strong>50km</strong>\\r\\n                                </div>\\r\\n                                <div class=\\\"col\\\">\\r\\n                                    <label for=\\\"\\\">Duração: </label>\\r\\n                                    <strong>27min</strong>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n</div>\\r\\n</form>\\r\\n</div>\\r\\n</div>\\r\\n<div class=\\\"card row mt-3\\\">\\r\\n    <div class=\\\"card-body pb-0 pt-2\\\">\\r\\n        <div class=\\\"card-title m-3\\\">\\r\\n            <h4 class=\\\"h4 font-weight-light\\\">Veiculos/Motoristas</h4>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\";","﻿import angular from \"angular\";\r\n\r\nexport const travelListComponent = {\r\n    bindings: {\r\n        dados: '<'\r\n    },\r\n    template: require('./travel-list.html'),\r\n    controller: ['$scope', '$stateParams', 'travelServices', '$state', '$injector'\r\n        , function ($scope, $stateParams, travelServices, $state, $injector) {\r\n            console.log(this);\r\n            $scope.companies = [];\r\n            $scope.RedirectToDetail = () => $state.go(\"travels.detail\", { id: 0 });\r\n        }]\r\n};","module.exports = \"<div class=\\\"d-flex justify-content-between row flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\\\">\\r\\n    <h3 class=\\\"col-sm-8 font-weight-light\\\">Viagens</h3>\\r\\n    <div class=\\\"btn-toolbar col-xs-4\\\">\\r\\n        <div class=\\\"btn-block\\\">\\r\\n            <button type=\\\"button\\\"\\r\\n                    class=\\\"\\r\\n                       btn pmd-ripple-effect pmd-btn-outline btn-sm pmd-btn-raised\\r\\n                       pmd-ripple-effect btn-default\\\"\\r\\n                    ng-click=\\\"RedirectToDetail()\\\">\\r\\n                Nova Viagem\\r\\n            </button>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"table-responsive\\\">\\r\\n    <table class=\\\"table table-hover table-striped table-sm table-bordered\\\">\\r\\n        <thead class=\\\"thead-dark\\\">\\r\\n            <tr class=\\\"text-center\\\">\\r\\n                <th>#</th>\\r\\n                <th>Nome</th>\\r\\n                <th>CNPJ</th>\\r\\n                <th>Cidade</th>\\r\\n                <th>Telefone</th>\\r\\n                <th>Ativo</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            <tr ng-if=\\\"companies.length > 0\\\" ng-repeat=\\\"com in companies\\\" class=\\\"text-center\\\">\\r\\n                <td ng-click=\\\"teste(com.FantasyName)\\\"><a href=\\\"#companies\\\">{{com.Id}}</a></td>\\r\\n                <td>{{com.FantasyName}}</td>\\r\\n                <td>{{com.Cnpj}}</td>\\r\\n                <td>{{com.City}}</td>\\r\\n                <td>{{com.Phone}}</td>\\r\\n                <td><input type=\\\"checkbox\\\" ng-disabled=true ng-checked=\\\"com.Act\\\"></td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td ng-if=\\\"companies.length == 0\\\" class=\\\"text-center\\\" colspan=\\\"6\\\">Não existem dados...</td>\\r\\n            </tr>\\r\\n        </tbody>\\r\\n    </table>\\r\\n</div>\\r\\n\";","﻿import { travelDetailComponent } from \"./travel-detail.component\";\r\nimport { travelListComponent } from \"./travel-list.component\";\r\n\r\nimport { travelServices } from \"./travel.services\";\r\n\r\nimport { travelState, travelDetailState, travelListState } from \"./travel.states\";\r\n\r\nexport const TRAVEL_MODULE = angular.module('travel.module', []);\r\n\r\nTRAVEL_MODULE.service('travelServices', travelServices);\r\n\r\nTRAVEL_MODULE.component('travelDetailComponent', travelDetailComponent);\r\nTRAVEL_MODULE.component('travelListComponent', travelListComponent);\r\n\r\nTRAVEL_MODULE.config(['$uiRouterProvider', function ($uiRouterProvider) {\r\n    var stateRegistry = $uiRouterProvider.stateRegistry;\r\n    stateRegistry.register(travelState);\r\n    stateRegistry.register(travelDetailState);\r\n    stateRegistry.register(travelListState);\r\n}]);","﻿travelServices.$inject = ['$http'];\r\n\r\nexport function travelServices($http) {\r\n\r\n    var api = window.location.origin + window.location.pathname + 'api/';\r\n    var service = {};\r\n\r\n    service.getTravels = () => $http.get(api + 'travel/');\r\n\r\n    service.getTravel = (id) => $http.get(api + 'travel/' + id);\r\n\r\n    return service;\r\n}\r\n\r\nexport default angular.module('services.travelServices', [])\r\n    .service('travelServices', travelServices).name;\r\n","﻿export const travelState = {\r\n    parent: 'app',\r\n    name: 'travels',\r\n    url: '/travels',\r\n    dsr: true,\r\n    views: {\r\n        'viewTravel': {\r\n            template: '<div ui-view=\"viewList\"></div><div ui-view=\"viewDetail\"></div>',\r\n        }\r\n    },\r\n    deepStateRedirect: {\r\n        default: { state: 'travels.list' }\r\n    }\r\n};\r\n\r\nexport const travelDetailState = {\r\n    name: 'travels.detail',\r\n    url: '/:id',\r\n    views: {\r\n        'viewDetail': {\r\n            component: 'travelDetailComponent',\r\n        }\r\n    },\r\n};\r\n\r\nexport const travelListState = {\r\n    name: 'travels.list',\r\n    views: {\r\n        'viewList': {\r\n            component: 'travelListComponent',\r\n        },\r\n    }\r\n};"],"sourceRoot":""}