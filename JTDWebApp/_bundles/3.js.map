{"version":3,"sources":["webpack:///./app/modules/company/company-list.component.js","webpack:///./app/modules/company/company-list.html","webpack:///./app/modules/company/company.module.js","webpack:///./app/modules/company/company.services.js","webpack:///./app/modules/company/company.states.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAA8B;;AAEvB;AACP,cAAc,mBAAO,CAAC,oEAAqB;AAC3C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,6BAA6B,SAAS,EAAE;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iCAAiC,+DAA+D;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;;AAET;;AAEA,KAAK;AACL,E;;;;;;;;;;;AC/HA,miDAAmiD,6BAA6B,QAAQ,+BAA+B,UAAU,+BAA+B,UAAU,+BAA+B,UAAU,+BAA+B,WAAW,yX;;;;;;;;;;;;ACA7uD;AAAA;AAAA;AAAA;AAAA;AAAgE;;AAEX;;AAEa;;AAE3D;;AAEP,yCAAyC,iEAAe;;AAExD,iDAAiD,4EAAoB;;AAErE,0E;AACA;AACA,2BAA2B,4DAAY;AACvC,2BAA2B,gEAAgB;AAC3C,CAAC,G;;;;;;;;;;;;AChBD;AAAA;AAAA;;AAEO;;AAEP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEe;AACf,qDAAqD,EAAC;;;;;;;;;;;;;ACpBtD;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA","file":"3.js","sourcesContent":["import angular from \"angular\";\r\n\r\nexport const companyListComponent = {\r\n    template: require('./company-list.html'),\r\n    controller: ['$scope', 'companyServices', 'blockUI', ($scope, companyServices, $blockUI) => {\r\n\r\n        $scope.companies = [];\r\n\r\n        const Toast = Swal.mixin({\r\n            toast: true,\r\n            position: \"bottom\",\r\n            showConfirmButton: false,\r\n            timer: 3000\r\n        });\r\n\r\n        var CNPJIsValid = (value) => {\r\n            var cnpj = value.replace(/[\\.\\-//]?/g, '');\r\n\r\n            if (/[\\D]/g.test(cnpj))\r\n                return 'O CNPJ deve conter apenas numeros.';\r\n\r\n            if (cnpj.length !== 14)\r\n                return 'O valor informado nao e um CNPJ valido.';\r\n        };\r\n\r\n        var searchCNPJ = (cnpj) => \r\n            companyServices.searchCnpj(cnpj)\r\n                           .then(rs => {\r\n                                if (!rs)\r\n                                    throw rs;\r\n                                return rs;\r\n                            });\r\n\r\n        var saveCompany = company =>\r\n            companyServices.saveCompany(company)\r\n            .then(rs => {\r\n                console.log(rs);\r\n                Toast.fire({\r\n                    icon: \"success\",\r\n                    title: \"Operacao Concluida!\",\r\n                });\r\n                getCompanies();\r\n                return rs;\r\n            });\r\n\r\n            var getCompanies = () =>  \r\n                companyServices.getCompanies()\r\n                .success(r => $scope.companies = r)\r\n                .error(e => { throw e; });\r\n\r\n        $scope.openModalCnpj = () => {\r\n            Swal.fire({\r\n                title: 'Informe o CNPJ da empresa abaixo: ',\r\n                input: 'text',\r\n                inputAttributes: {\r\n                    autocapitalize: 'off',\r\n                    'ui-br-cnpj-mask': true,\r\n                    'max-length': 18\r\n                },\r\n                customClass: {\r\n                    input: 'ml-5 mr-5 w-75'\r\n                },\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Buscar',\r\n                showLoaderOnConfirm: true,\r\n                inputValidator: CNPJIsValid,\r\n                preConfirm: searchCNPJ,\r\n                allowOutsideClick: () => !Swal.isLoading()\r\n            })\r\n            .then((result) => {\r\n                if (result.value.status === 200) {\r\n                    Swal.fire({\r\n                        title: `CNPJ Encontrado!`,\r\n                        text: `${result.value.data.FantasyName || result.value.data.Person.Name}`,\r\n                        icon: 'info',\r\n                        showCancelButton: true,\r\n                        confirmButtonColor: '#3085d6',\r\n                        cancelButtonColor: '#d33',\r\n                        cancelButtonText: 'Esta errado, quero cancelar.',\r\n                        confirmButtonText: 'Esta correto, pode salvar.',\r\n                        preConfirm: () => saveCompany(result.value.data),\r\n                    });\r\n                }\r\n            })\r\n        }\r\n\r\n        $scope.openOptions = (t) => \r\n            new window.$.confirm({\r\n                title: t,\r\n                titleClass: 'd-inline-block text-truncate',\r\n                content: 'Selecione uma das opções abaixo...',\r\n                type: 'dark',\r\n                animateFromElement: false,\r\n                animation: 'scale',\r\n                closeAnimation: 'scale',\r\n                animationBounce: 1.5,\r\n                typeAnimated: true,\r\n                backgroundDismiss: true,\r\n                bgOpacity: true,\r\n                buttons: {\r\n                    Exclude: {\r\n                        text: 'Excluir',\r\n                        btnClass: 'btn btn-red float-left',\r\n                        action: function () {\r\n                            console.log(this);\r\n                            alert('Excluir');\r\n                        }\r\n                    },\r\n                    Travel: {\r\n                        text: 'Viagem',\r\n                        btnClass: 'btn-dark',\r\n                        action: () => alert('VIAGEM')\r\n                    },\r\n                    Edit: {\r\n                        text: 'Editar',\r\n                        btnClass: 'btn btn-outline-secondary',\r\n                        action: function () {\r\n                            console.log(this);\r\n                            alert('Editar');\r\n                        }\r\n                    },\r\n            },\r\n        });\r\n    \r\n        getCompanies();\r\n       \r\n    }]\r\n};","module.exports = \"<div\\r\\n    class=\\\"d-flex justify-content-between row flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\\\">\\r\\n    <h3 class=\\\"col-sm-8 font-weight-light\\\">Companias</h3>\\r\\n    <div class=\\\"btn-toolbar col-sm-4\\\">\\r\\n        <div class=\\\"btn-group btn-block\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"sticky-top font-weight-light\\r\\n                       btn pmd-btn-outline btn-sm pmd-btn-raised\\r\\n                     btn-default\\\" ng-click=\\\"openModalCnpj()\\\">\\r\\n                Nova c/ CNPJ\\r\\n            </button>\\r\\n            <button type=\\\"button\\\" class=\\\"sticky-top font-weight-light\\r\\n                       btn pmd-btn-outline btn-sm pmd-btn-raised\\r\\n                     btn-default\\\" ng-click=\\\"openModalEdit()\\\">\\r\\n                Nova manual\\r\\n            </button>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"table-responsive font-italic\\\">\\r\\n    <table class=\\\"table table-hover table-striped table-sm table-bordered\\\">\\r\\n        <thead class=\\\"thead-dark\\\">\\r\\n            <tr class=\\\"text-center\\\">\\r\\n                <th>#</th>\\r\\n                <th>Nome</th>\\r\\n                <th>CNPJ</th>\\r\\n                <th>Cidade</th>\\r\\n                <th>Telefone</th>\\r\\n                <!-- <th>Ativo</th> -->\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody class=\\\"text-capitalize\\\">\\r\\n            <tr ng-click=\\\"openOptions(com.Name)\\\" ng-if=\\\"companies.length > 0\\\" ng-repeat=\\\"com in companies\\\"\\r\\n                class=\\\"text-center\\\" style=\\\"cursor: pointer;\\\">\\r\\n                <td>{{com.Id}}</td>\\r\\n                <td>{{com.Name}}</td>\\r\\n                <td>{{com.Cnpj}}</td>\\r\\n                <td>{{com.City}}</td>\\r\\n                <td>{{com.Phone}}</td>\\r\\n                <!-- <td><input type=\\\"checkbox\\\" ng-click=\\\"alert\\\" class=\\\"form-control\\\" ng-disabled=true ng-checked=\\\"com.Act\\\"></td> -->\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td ng-if=\\\"companies.length == 0\\\" class=\\\"text-center\\\" colspan=\\\"6\\\">Não existem dados...</td>\\r\\n            </tr>\\r\\n        </tbody>\\r\\n    </table>\\r\\n</div>\";","import { companyListComponent } from \"./company-list.component\";\r\n\r\nimport { companyServices } from \"./company.services\";\r\n\r\nimport { companyState, companyListState } from \"./company.states\";\r\n\r\nexport const COMPANY_MODULE = angular.module('company.module', []);\r\n\r\nCOMPANY_MODULE.service('companyServices',companyServices);\r\n\r\nCOMPANY_MODULE.component('companyListComponent', companyListComponent);\r\n\r\nCOMPANY_MODULE.config(['$uiRouterProvider', function ($uiRouterProvider) {    \r\n    var stateRegistry = $uiRouterProvider.stateRegistry;\r\n    stateRegistry.register(companyState);\r\n    stateRegistry.register(companyListState);\r\n}]);","companyServices.$inject = ['$http'];\r\n\r\nexport function companyServices($http) {\r\n\r\n    var api = window.location.origin + window.location.pathname + 'api/';\r\n    var service = {};\r\n\r\n    service.getCompanies = () => $http.get(api + 'Company/');\r\n\r\n    service.searchCnpj = (cnpj) => {\r\n        var cnpjClean = cnpj.replace(/[\\.\\-//]?/g, '');\r\n        return $http.get(api + 'integrations/cnpj/' + cnpjClean);\r\n    }\r\n\r\n    service.saveCompany = (company) => $http.post(api + 'company/SaveCompany', company);\r\n\r\n    return service;\r\n}\r\n\r\nexport default angular.module('services.companyServices', [])\r\n    .service('companyServices', companyServices).name;\r\n","export const companyState = {\r\n\tparent:'app',\r\n\tname: 'companies',\r\n\turl: '/companies',\r\n\tdsr: true,\r\n\tsticky: true,\r\n\tviews: {\r\n\t\t'viewCompany':{\r\n\t\t\ttemplate: '<div ui-view=\"viewList\"></div><div ui-view=\"viewDetail\"></div>'\r\n\t\t}\r\n\t},\r\n\tdeepStateRedirect: {\r\n        default: { state: 'companies.list' }\r\n    }\r\n};\r\n\r\nexport const companyListState = {\r\n\tname: 'companies.list',\r\n\tviews: {\r\n\t\t'viewList': {\r\n\t\t\tcomponent: 'companyListComponent'\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n"],"sourceRoot":""}